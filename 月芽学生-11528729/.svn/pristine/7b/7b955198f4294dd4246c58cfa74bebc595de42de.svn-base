<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="../css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="../css/ui-box.css">
        <link rel="stylesheet" href="../css/ui-base.css">
        <link rel="stylesheet" href="../css/ui-color.css">
        <link rel="stylesheet" href="../css/appcan.control.css">
        <style>
            .disable {
                color:#FFFFFF;
                background: #dcd8d5;
            }
            .icon_headimage {
                width: 2em;
                height:2em;
                background:url(../css/image1/ico_gerenzhongxin@2x_06.png) no-repeat;
                background-size:100% 100%;
            }
            .bg_headimage {
                width: 5em;
                height:5em;
                background:url(../css/image1/ico_gerenzhongxin@2x_03.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_name {
                width: 2em;
                height:2em;
                background:url(../css/image1/ico_gerenzhongxin@2x_14.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_nick_name {
                width: 2em;
                height:2em;
                background:url(../css/image1/ico_gerenzhongxin@2x_18.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_school {
                width: 2em;
                height:2em;
                background:url(../css/image1/ico_gerenzhongxin@2x_28.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_qq {
                width: 2em;
                height:2em;
                background:url(../css/image1/ico_gerenzhongxin@2x_22.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_email {
                width: 2em;
                height:2em;
                background:url(../css/image1/ico_gerenzhongxin@2x_26.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_mobile {
               
                width: 2em;
                height:2em;
                background:url(../css/image1/mobile.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_class {
                width: 2em;
                height:2em;
                background:url(../css/image1/ico_gerenzhongxin@2x_30.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_grade{
                width: 2em;
                height:2em;
                background:url(../css/icons/grade.png) no-repeat;
                background-size:100% 100%;
            }
            .icon_achievement{
                width: 2em;
                height:2em;
                background:url(../css/icons/achievement.png) no-repeat;
                background-size:95% 95%;
            }
        </style>
    </head>
    <body class="um-vp bc-bg" ontouchstart>
        <div class="ub ub-fh ub-ver">
           <div class="ub ub-ver ub-f1 ub-fh">
               
               <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="headImg">
                   <div class="ub ub-f1 ub-ac ub-pc" style="padding:0.5em">
                       <div class="ub icon_headimage"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">头像</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac">
                           <div class="ub ub-ac ub-pc ub-f1 bg_headimage" style="width:5em;height:5em" >
                               <img class="ub" src="../head.png" style="width:85%;height:85%;border-radius: 50%" />
                           </div>
                       </div>
                       <div class="fa icon-angle-right fa-2x sc-text"></div>
                    </div>
               </div>
               <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="name">
                   <div class="ub ub-f1 uinn" style="padding:0.5em">
                       <div class="ub icon_name"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">姓名</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac name sc-text value">&nbsp;</div>
                       <div class="fa">&nbsp;</div>
                   </div>
               </div>
 
               <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="nickName">
                   <div class="ub ub-f1 uinn" style="padding:0.5em">
                       <div class="ub icon_nick_name"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">昵称</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac nickName sc-text value">&nbsp;</div>
                       <div class="fa icon-angle-right fa-2x sc-text"></div>
                   </div>
               </div>
               <!-- 等级 开始-->
                <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="grade">
                   <div class="ub ub-f1 uinn" style="padding: 0.5em">
                       <div class="ub icon_grade"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">等级</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac email sc-text value">&nbsp;</div>
                       <div class="fa sc-text readLevelName" style="line-height: 2em">num</div>
                       <div class="fa icon-angle-right fa-2x sc-text"></div>
                   </div>
                </div>
               <!-- 等级 结束-->
                <!-- <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="achievement">
                   <div class="ub ub-f1 uinn" style="padding: 0.5em">
                       <div class="ub icon_achievement"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">成就</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac school sc-text value">&nbsp;</div>
                       <div class="fa icon-angle-right fa-2x sc-text"></div>
                       <div class="fa">&nbsp;</div>
                   </div>
               </div> -->
               <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="qq">
                   <div class="ub ub-f1 uinn" style="padding:0.5em">
                       <div class="ub icon_qq"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">QQ</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac qq sc-text value">&nbsp;</div>
                       <div class="fa icon-angle-right fa-2x sc-text"></div>
                   </div>
               </div>
               
               <div class="ub ub-fh ub-ac ub-pc bc-border ubb"  id="email">
                   <div class="ub ub-f1 uinn" style="padding: 0.5em">
                       <div class="ub icon_email"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">邮箱</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac email sc-text value">&nbsp;</div>
                       <div class="fa icon-angle-right fa-2x sc-text"></div>
                   </div>
               </div>
           
                <div class="ub ub-fh ub-ac ub-pc bc-border ubb"  id="mobile">
                   <div class="ub ub-f1 uinn">
                       <div class="ub icon_mobile"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">手机号码</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac mobile sc-text value">&nbsp;</div>
                       <div class="fa icon-angle-right fa-2x sc-text"></div>
                   </div>
               </div>
           
               <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="school">
                   <div class="ub ub-f1 uinn" style="padding: 0.5em">
                       <div class="ub icon_school"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">学校</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac school sc-text value">&nbsp;</div>
                       <div class="fa">&nbsp;</div>
                   </div>
               </div>
               
                <div class="ub ub-fh ub-ac ub-pc bc-border ubb" id="class">
                   <div class="ub ub-f1 uinn" style="padding: 0.5em">
                       <div class="ub icon_class"></div>
                       <div class="ub ub-ac ub-pc sc-text umar-l">班级</div>
                       <div class="ub ub-f1"></div>
                       <div class="ub ub-ac class sc-text value">&nbsp;</div>
                       <div class="fa">&nbsp;</div>
                   </div>
               </div>
 
           </div>
        </div>
    </body>
    <script src="../js/appcan.js"></script>
    <script src="../js/appcan.control.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/entity.js"></script>
    </body>
    <script>
        appcan.ready(function() {
            getUserInfo();
            getSysInfo();
            loadData();
             //相片上传
            uexImage.onPickerClosed=function(info){
                var obj=JSON.parse(info);
                if(!obj.isCancelled){
                    userInfo.headImgSrc=obj.data[0];
                    setUserInfo(false);
                    appcan.window.open("headCut", "headImgCut.html", 5);
               }

            }

        });
        function loadData(){
            getUserInfo();
            $("#name .value").html(userInfo.name);
            $("#nickName .value").html(userInfo.nickName);
            $("#qq .value").html(userInfo.qq);
            $("#email .value").html(userInfo.email);
            $("#mobile .value").html(userInfo.mobile);
            $("#school .value").html(userInfo.schoolName);
            $("#class .value").html(userInfo.clazzName);
            // 等级数据
            $(".readLevelName").html(userInfo.readLevelName);
            
            getHeadImg(
                function(imgPath)
                {
                    $("#headImg img").attr("src",imgPath);
                },
                function(msg)
                {
                    toast(msg,config.toastTimeShort);
                }
            );
        }
        //头像
        appcan.button("#headImg", "btn-act", function() {
           appcan.frame.open("actionSheet","user_headImg_actionSheet.html");
        })
        //昵称
        appcan.button("#nickName", "btn-act", function() {
           sysInfo.usermodifyType = 0;
           setSysInfo();
           appcan.window.open("user_modify","user_modify.html",5);
        }) 
        //等级
        appcan.button("#grade", "btn-act", function() {
            
            appcan.window.open("user_grade","user_grade.html",5);
        }) 
        //QQ
        appcan.button("#qq", "btn-act", function() {
           sysInfo.usermodifyType = 1;
           setSysInfo();
            appcan.window.open("user_modify","user_modify.html",5);
        })
        //邮箱
        appcan.button("#email", "btn-act", function() {
           sysInfo.usermodifyType = 2;
           setSysInfo();
            appcan.window.open("user_modify","user_modify.html",5);
        })
        //手机号码：studetPhone
        appcan.button("#mobile", "btn-act", function() {
           sysInfo.usermodifyType = 3;
           setSysInfo();
            appcan.window.open("user_modify","user_modify.html",5);
        })
        // 成就      
        appcan.button("#achievement", "btn-act", function() {
           
            appcan.window.open("user_achievement","user_achievement.html",5);
        })
        

         //拍照--上传摄像机拍摄图片
        function openCamera() {
            uexCamera.cbOpen = function(opCode, dataType, data) {
                userInfo.headImgSrc=data;
                setUserInfo(false);
                appcan.window.open("headCut", "headImgCut.html", 5);
            }
            uexCamera.open();
            //关闭选择界面
            appcan.frame.close("actionSheet");
            uexWindow.evaluateScript("", 0, "isOpenSheet=false;");
        }

        //从相册中选择相片--上传整张图片
        function openfile() {
           var data = {
                min:1,
                max:1,
                quality:1
            }
            var json = JSON.stringify(data);
            uexImage.openPicker(json);
            //关闭选择界面
            appcan.frame.close("actionSheet");
            uexWindow.evaluateScript("", 0, "isOpenSheet=false;");
        }

    </script>
</html>
